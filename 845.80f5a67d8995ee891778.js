"use strict";(self.webpackChunkreact_blog=self.webpackChunkreact_blog||[]).push([[845],{9272:function(e,a,t){t.d(a,{I:function(){return n}});var r=t(7090),s=t(7294),l=t(5893);const n=(0,s.memo)((e=>{const{className:a,value:t,onChange:n,label:c,type:o="text",autofocus:i,readonly:d,...u}=e,v=(0,s.useRef)(null);(0,s.useEffect)((()=>{i&&v.current?.focus()}),[i]);const g={fTN1PnWu:d};return(0,l.jsxs)("div",{className:(0,r.A)("yiPASP1v",g,[a]),children:[c&&(0,l.jsx)("div",{className:"v71VlLMX",children:c}),(0,l.jsx)("input",{...u,ref:v,type:o,value:t,readOnly:d,onChange:e=>{n?.(e.target.value)},className:"LVdIPwcx"})]})}))},5877:function(e,a,t){t.r(a),t.d(a,{default:function(){return Y}});var r=t(7090),s=t(5443),l=t(7294),n=t(4839),c=t(3562),o=t(2647),i=t(8498),d=t(9655),u=t(1992),v=t(4868),g=t(9272),h=t(5893);const m=(0,l.memo)((e=>{const{className:a,label:t,options:s,value:n,onChange:c,readonly:o,labelNoWidth:i}=e,d=(0,l.useMemo)((()=>s?.map((e=>(0,h.jsx)("option",{value:e.value,children:e.content},e.value)))),[s]),u={kluot2iC:o};return(0,h.jsxs)("div",{className:(0,r.A)("i8c9qOHJ",u,[a]),children:[t&&(0,h.jsx)("div",{className:(0,r.A)("G1uuf7Bp",{eR8FkSnC:i},[]),children:t}),(0,h.jsx)("select",{className:"VOKOuKGo",value:n,onChange:e=>{c?.(e.target.value)},disabled:o,children:d})]})}));var p=t(9855),x={articleSortSelector:"Qejo9s5f",order:"wykpgrxz"};const b=(0,l.memo)((e=>{const{className:a,sort:t,order:n,onChangeOrder:c,onChangeSort:o}=e,{t:i}=(0,s.$)("article"),d=(0,l.useMemo)((()=>[{value:p.$B.CREATED,content:i("SortFieldCreated")},{value:p.$B.VIEWS,content:i("SortFieldViews")},{value:p.$B.TITLE,content:i("SortFieldTitle")}]),[i]),u=(0,l.useMemo)((()=>[{value:"asc",content:i("SortDirectionAsc")},{value:"desc",content:i("SortDirectionDesc")}]),[i]);return(0,h.jsxs)("div",{className:(0,r.A)(x.articleSortSelector,{},[a]),children:[(0,h.jsx)(m,{className:x.sortBy,label:i("SortByLabel"),options:d,value:t,onChange:o,labelNoWidth:!0}),(0,h.jsx)(m,{className:x.order,label:i("SortDirectionLabel"),options:u,value:n,onChange:c,labelNoWidth:!0})]})}));var y;function C(){return C=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},C.apply(this,arguments)}var S;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},w.apply(this,arguments)}var j=t(2790),A=t(7478);const T=[{view:p.GA.TILE,icon:e=>l.createElement("svg",C({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},e),y||(y=l.createElement("path",{d:"M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm7 9v5h5v-5h-5Zm-7 0v5h5v-5H6Zm7-7v5h5V6h-5ZM6 6v5h5V6H6Z"})))},{view:p.GA.LIST,icon:e=>l.createElement("svg",w({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},e),S||(S=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 18a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15A.75.75 0 0 1 3.75 6Z"})))}],f=(0,l.memo)((e=>{const{className:a,view:t,onViewClick:s}=e;return(0,h.jsx)("div",{className:(0,r.A)("JCnRWCuV",{},[a]),children:T.map((e=>{return(0,h.jsx)(j.zx,{theme:j.bn.CLEAR,onClick:(a=e.view,()=>{s?.(a)}),children:(0,h.jsx)(A.J,{Svg:e.icon,className:(0,r.A)("",{UJ0tc6UA:e.view===t},[])})},e.view);var a}))})}));var N=t(4593);const L=(0,l.memo)((e=>{const{className:a,tabs:t,onTabClick:s,value:n}=e,c=(0,l.useCallback)((e=>()=>{s(e)}),[s]);return(0,h.jsx)("div",{className:(0,r.A)("W5MNGLpm",{},[a]),children:t.map((e=>(0,h.jsx)(N.Z,{theme:e.value===n?N.r.NORMAL:N.r.OUTLINED,onClick:c(e),children:e.content},e.value)))})})),P=(0,l.memo)((e=>{const{className:a,value:t,onChangeType:n}=e,{t:c}=(0,s.$)("article"),o=(0,l.useMemo)((()=>[{value:p.Iq.ALL,content:c("AllTabItemText")},{value:p.Iq.IT,content:c("ITTabItemText")},{value:p.Iq.JS,content:c("JSTabItemText")},{value:p.Iq.FOOD,content:c("FoodTabItemText")}]),[c]),i=(0,l.useCallback)((e=>{n(e.value)}),[n]);return(0,h.jsx)(L,{className:(0,r.A)("",{},[a]),tabs:o,value:t,onTabClick:i})}));var I=t(4268);const E=e=>e.articlesPage?.isLoading||!1,k=e=>e.articlesPage?.error,O=e=>e.articlesPage?.view||p.GA.TILE,R=e=>e.articlesPage?.page||1,M=e=>e.articlesPage?.sort??p.$B.CREATED,V=e=>e.articlesPage?.order??"asc",q=e=>e.articlesPage?.search??"",D=e=>e.articlesPage?.type??p.Iq.ALL,$=(0,I.hg)("articlesPage/fetchArticlesList",(async(e,a)=>{const{rejectWithValue:t,extra:r,getState:s}=a,l=s().articlesPage?.limit||9,n=R(s()),c=M(s()),o=V(s()),i=q(s()),d=D(s());try{u={sort:c,order:o,search:i,type:d},window.history.pushState(null,"",(e=>{const a=new URLSearchParams(window.location.search);return Object.entries(e).forEach((e=>{let[t,r]=e;void 0!==r&&a.set(t,r)})),`?${a.toString()}`})(u));const e=await r.api.get("/articles",{params:{_expand:"user",_limit:l,_page:n,_sort:c,_order:o,q:i,type:d===p.Iq.ALL?void 0:d}});if(!e.data)throw new Error;return e.data}catch(e){return t("error")}var u}));var W=t(5008);const Z=(0,I.HF)({selectId:e=>e.id}),B=Z.getSelectors((e=>e.articlesPage||Z.getInitialState())),G=(0,I.oM)({name:"articleDetailsCommentSlice",initialState:Z.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{},view:p.GA.TILE,page:1,limit:4,hasMore:!0,isInited:!1,sort:p.$B.CREATED,search:"",order:"asc",type:p.Iq.ALL}),reducers:{setView:(e,a)=>{e.view=a.payload,localStorage.setItem(W.fK,a.payload)},setPage:(e,a)=>{e.page=a.payload},setSort:(e,a)=>{e.sort=a.payload},setSearch:(e,a)=>{e.search=a.payload},setOrder:(e,a)=>{e.order=a.payload},setType:(e,a)=>{e.type=a.payload},initState:e=>{const a=localStorage.getItem(W.fK);e.view=a,e.limit=a===p.GA.LIST?4:9,e.isInited=!0}},extraReducers:e=>{e.addCase($.pending,((e,a)=>{e.error=void 0,e.isLoading=!0,a.meta.arg.replace&&Z.removeAll(e)})).addCase($.fulfilled,((e,a)=>{e.isLoading=!1,e.hasMore=a.payload.length>=e.limit,a.meta.arg.replace?Z.setAll(e,a.payload):Z.addMany(e,a.payload)})).addCase($.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{reducer:H,actions:F}=G,J=(0,l.memo)((e=>{const{className:a}=e,{t:t}=(0,s.$)("article"),n=(0,o.T)(),c=(0,u.v9)(O),i=(0,u.v9)(M),d=(0,u.v9)(V),m=(0,u.v9)(q),p=(0,u.v9)(D),x=(0,l.useCallback)((()=>{n($({replace:!0}))}),[n]),y=((e,a)=>{const t=(0,l.useRef)();return(0,l.useCallback)((function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];t.current&&clearTimeout(t.current),t.current=setTimeout((()=>{e(...r)}),500)}),[e,500])})(x),C=(0,l.useCallback)((e=>{n(F.setView(e)),n(F.setPage(1)),x()}),[n,x]),S=(0,l.useCallback)((e=>{n(F.setSort(e)),n(F.setPage(1)),x()}),[n,x]),w=(0,l.useCallback)((e=>{n(F.setOrder(e)),n(F.setPage(1)),x()}),[n,x]),j=(0,l.useCallback)((e=>{n(F.setSearch(e)),n(F.setPage(1)),y()}),[n,y]),A=(0,l.useCallback)((e=>{n(F.setType(e)),n(F.setPage(1)),x()}),[n,x]);return(0,h.jsxs)("div",{className:(0,r.A)("",{},[a]),children:[(0,h.jsxs)("div",{className:"pyOjonnp",children:[(0,h.jsx)(b,{sort:i,order:d,onChangeSort:S,onChangeOrder:w}),(0,h.jsx)(f,{view:c,onViewClick:C})]}),(0,h.jsx)(v.Z,{className:"QkNSez8q",children:(0,h.jsx)(g.I,{label:t("SearchLabel"),value:m,onChange:j})}),(0,h.jsx)(P,{className:"JHbc4jKB",value:p,onChangeType:A})]})})),_=(0,I.hg)("articlesPage/fetchNextArticlePage",(async(e,a)=>{const{getState:t,dispatch:r}=a,s=t().articlesPage?.hasMore,l=R(t()),n=E(t());s&&!n&&(r(F.setPage(l+1)),r($({})))})),U=(0,I.hg)("articlesPage/initArticlesPage",(async(e,a)=>{const{getState:t,dispatch:r}=a;if(!t().articlesPage?.isInited){const a=e.get("order"),t=e.get("sort"),s=e.get("search"),l=e.get("type");a&&r(F.setOrder(a)),t&&r(F.setSort(t)),s&&r(F.setSearch(s)),l&&r(F.setType(l)),r(F.initState()),r($({}))}}));var K=t(6276);const z=(0,l.memo)((e=>{const{className:a}=e,{t:t}=(0,s.$)("article"),r=(0,u.v9)(B.selectAll),l=(0,u.v9)(E),n=(0,u.v9)(k),c=(0,u.v9)(O);return n?(0,h.jsx)(K.xv,{theme:K.lg.ERROR,align:K.PH.CENTER,title:t("ArticlesLoadingErrorTitle"),text:t("ArticlesLoadingErrorText"),TitleTag:"h1"}):(0,h.jsx)(p.wD,{articles:r,view:c,isLoading:l,className:a})})),Q={articlesPage:H},X=e=>{const{className:a}=e,{t:t}=(0,s.$)("article"),u=(0,o.T)(),[v]=(0,d.lr)();(0,c.Q)((()=>{u(U(v))}));const g=(0,l.useCallback)((()=>{u(_())}),[u]);return(0,h.jsx)(n.W,{reducers:Q,removeAfterUnmount:!1,children:(0,h.jsxs)(i.T,{className:(0,r.A)("rfWa2r3q",{},[a]),onScrollEnd:g,children:[t("ArticlesPage"),(0,h.jsx)(J,{}),(0,h.jsx)(z,{className:"UsH35LqR"})]})})};var Y=(0,l.memo)(X)}}]);