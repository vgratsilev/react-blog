"use strict";(self.webpackChunkreact_blog=self.webpackChunkreact_blog||[]).push([[225],{9272:function(e,t,a){a.d(t,{I:function(){return c}});var s=a(7090),n=a(7294),l=a(5893);const c=(0,n.memo)((e=>{const{className:t,value:a,onChange:c,label:r,type:i="text",autofocus:o,readonly:d,...u}=e,h=(0,n.useRef)(null);(0,n.useEffect)((()=>{o&&h.current?.focus()}),[o]);const x={fTN1PnWu:d};return(0,l.jsxs)("div",{className:(0,s.A)("yiPASP1v",x,[t]),children:[r&&(0,l.jsx)("div",{className:"v71VlLMX",children:r}),(0,l.jsx)("input",{...u,ref:h,type:i,value:a,readOnly:d,onChange:e=>{c?.(e.target.value)},className:"LVdIPwcx"})]})}))},3225:function(e,t,a){a.r(t),a.d(t,{ArticleRating:function(){return R}});var s,n=a(7294),l=a(5443),c=a(7090),r=a(157),i=a(4868),o=a(6276),d=a(9272);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},u.apply(this,arguments)}var h=e=>n.createElement("svg",u({width:24,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=n.createElement("path",{d:"M11.075 1.633c.32-.844 1.53-.844 1.852 0l2.07 5.734a.99.99 0 0 0 .926.633h5.087c.94 0 1.35 1.17.61 1.743L18 13a.968.968 0 0 0-.321 1.092L19 19.695c.322.9-.72 1.673-1.508 1.119l-4.917-3.12a1 1 0 0 0-1.15 0l-4.917 3.12c-.787.554-1.83-.22-1.508-1.119l1.322-5.603A.968.968 0 0 0 6 13L2.38 9.743C1.64 9.17 2.053 8 2.99 8h5.087a.989.989 0 0 0 .926-.633l2.07-5.734h0Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),x=a(45),m=a(5542),g=a(5893);const b=[1,2,3,4,5],j=(0,n.memo)((e=>{const{className:t,onSelect:a,size:s=30,selectedStars:r=0,showEditBtn:i=!0}=e,{t:o}=(0,l.$)(),[d,u]=(0,n.useState)(r),[j,k]=(0,n.useState)(Boolean(r)),p=()=>{j||u(0)},C=e=>()=>{j||(a?.(e),u(e),k(!0))},v=(0,n.useCallback)((()=>{k(!1),u(0)}),[]);return(0,g.jsxs)("div",{className:(0,c.A)("MRM0S3Nd",{},[t]),children:[b.map((e=>{return(0,g.jsx)(x.J,{Svg:h,className:(0,c.A)("Z1C6YFZ0",{QpbxqwVr:d>=e,ouStZWWc:j},["Yv7EH3L0"]),width:s,height:s,onMouseLeave:p,onMouseEnter:(t=e,()=>{j||u(t)}),onClick:C(e)},e);var t})),i&&(0,g.jsx)(m.zx,{theme:m.bn.CLEAR,onClick:v,className:"F0rFWqhM",children:o("StarRatingEditBtnText")})]})}));var k=a(7849),p=a(2790),C=a(3194),v=a(6370);const f=(0,n.memo)((e=>{const{className:t,title:a,feedbackTitle:s,onCancel:u,onAccept:h,rate:x=0}=e,{t:m}=(0,l.$)(),[b,f]=(0,n.useState)(!1),[N,S]=(0,n.useState)(x),[y,A]=(0,n.useState)(""),E=(0,n.useCallback)((e=>{S(e),s?f(!0):h?.(e)}),[s,h]),L=(0,n.useCallback)((()=>{f(!1),h?.(N,y)}),[y,h,N]),R=(0,n.useCallback)((()=>{f(!1),u?.(N)}),[u,N]),w=(0,n.useCallback)((()=>{f(!1)}),[]),I=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.xv,{title:s,align:o.PH.CENTER,className:"guWYv88A"}),(0,g.jsx)(d.I,{label:m("FeedbackLabel"),className:"gx7eSUN9",onChange:A})]});return(0,g.jsx)(i.Z,{className:(0,c.A)("",{},[t]),maxWidth:!0,children:(0,g.jsxs)(r.g,{align:"center",gap:"8",children:[(0,g.jsx)(o.xv,{title:N?m("FeedbackSetDefaultTitle"):a}),(0,g.jsx)(j,{size:40,onSelect:E,selectedStars:x}),(0,g.jsx)(k.u,{isOpen:b,onClose:w,lazy:!0,children:(0,C.s)()?(0,g.jsx)(v.d,{isOpen:b,onClose:R,children:(0,g.jsxs)(r.g,{gap:"16",maxWidth:!0,children:[I,(0,g.jsx)(p.zx,{onClick:L,size:p.qE.L,maxWidth:!0,children:m("FeedbackSendBtnText")})]})}):(0,g.jsx)(k.u,{isOpen:b,onClose:w,lazy:!0,children:(0,g.jsxs)(r.g,{gap:"32",maxWidth:!0,children:[I,(0,g.jsxs)(r.U,{maxWidth:!0,gap:"16",justify:"end",children:[(0,g.jsx)(p.zx,{theme:p.bn.OUTLINE_RED,onClick:R,children:m("FeedbackCloseBtnText")}),(0,g.jsx)(p.zx,{onClick:L,children:m("FeedbackSendBtnText")})]})]})})})]})})}));var N=a(1992),S=a(5625),y=a(7795);const A=a(7945).p.injectEndpoints({endpoints:e=>({getArticleRating:e.query({query:e=>{let{userId:t,articleId:a}=e;return{url:"/articleRatings",params:{userId:t,articleId:a}}}}),rateArticle:e.mutation({query:e=>({url:"/articleRatings",method:"POST",body:e})})})}),{useGetArticleRatingQuery:E,useRateArticleMutation:L}=A,R=(0,n.memo)((e=>{const{className:t,articleId:a}=e,{t:s}=(0,l.$)("article"),c=(0,N.v9)(S.m5),{data:r,isLoading:i}=E({userId:c?.id??"",articleId:a}),[o]=L(),d=(0,n.useCallback)(((e,t)=>{try{o({articleId:a,userId:c?.id??"",rate:e,feedback:t})}catch(e){console.error("Rate article failed",e)}}),[a,c?.id,o]),u=(0,n.useCallback)(((e,t)=>{d(e,t)}),[d]),h=(0,n.useCallback)((e=>{d(e)}),[d]);if(i)return(0,g.jsx)(y.O,{width:"100%",height:120});const x=r?.[0];return(0,g.jsx)(f,{className:t,title:s("RateArticleTitle"),feedbackTitle:s("FeedbackArticleTitle"),rate:x?.rate,onAccept:u,onCancel:h})}))}}]);