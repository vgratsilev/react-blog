"use strict";(self.webpackChunkreact_blog=self.webpackChunkreact_blog||[]).push([[274],{5274:(e,n,r)=>{r.r(n),r.d(n,{default:()=>P});var t=r(5893),a=r(927),o=r(5443),u=r(4763),c=r(9822),l=r(7007),i=r(7294),s=r(6176),f=r(5150),d=r(4330),p=r(7168),h=r(6136),v=r(8896),y=(0,p.hg)("login/loginByUsername",(function(e,n){return r=void 0,t=void 0,o=function(){var r,t,a,o;return function(e,n){var r,t,a,o,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,t&&(a=2&o[0]?t.return:o[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,o[1])).done)return a;switch(t=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,t=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((a=(a=u.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){u.label=o[1];break}if(6===o[0]&&u.label<a[1]){u.label=a[1],a=o;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(o);break}a[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(e,u)}catch(e){o=[6,e],t=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(u){switch(u.label){case 0:r=n.dispatch,t=n.rejectWithValue,a=n.extra,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,a.api.post("/login",e)];case 2:if(!(o=u.sent()).data)throw new Error;return localStorage.setItem(v.z,JSON.stringify(o.data)),r(h.hI.setAuthData(o.data)),[2,o.data];case 3:return u.sent(),[2,t("LoginErrorMessage")];case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,n){function u(e){try{l(o.next(e))}catch(e){n(e)}}function c(e){try{l(o.throw(e))}catch(e){n(e)}}function l(n){var r;n.done?e(n.value):(r=n.value,r instanceof a?r:new a((function(e){e(r)}))).then(u,c)}l((o=o.apply(r,t||[])).next())}));var r,t,a,o})),b={isLoading:!1,username:"",password:"",error:""},g=(0,p.oM)({name:"login",initialState:b,reducers:{setUsername:function(e,n){e.username=n.payload},setPassword:function(e,n){e.password=n.payload}},extraReducers:function(e){e.addCase(y.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(y.fulfilled,(function(e){e.isLoading=!1})).addCase(y.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),m=g.actions,w=g.reducer,x=function(e){var n;return null!==(n=null==e?void 0:e.loginForm)&&void 0!==n?n:b};const j="PQPa1eB5";var O=function(){return O=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},O.apply(this,arguments)},k={loginForm:w};const P=(0,i.memo)((function(e){var n=e.className,r=e.onSuccess,p=(0,o.$)().t,h=(0,d.T)(),v=(0,l.v9)(x),b=v.username,g=v.password,w=v.isLoading,P=v.error,C=(0,i.useCallback)((function(e){h(m.setUsername(e))}),[h]),N=(0,i.useCallback)((function(e){h(m.setPassword(e))}),[h]),I=(0,i.useCallback)((function(){return e=void 0,n=void 0,a=function(){return function(e,n){var r,t,a,o,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,t&&(a=2&o[0]?t.return:o[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,o[1])).done)return a;switch(t=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,t=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((a=(a=u.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){u.label=o[1];break}if(6===o[0]&&u.label<a[1]){u.label=a[1],a=o;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(o);break}a[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(e,u)}catch(e){o=[6,e],t=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(e){switch(e.label){case 0:return[4,h(y({username:b,password:g}))];case 1:return"fulfilled"===e.sent().meta.requestStatus&&r(),[2]}}))},new((t=void 0)||(t=Promise))((function(r,o){function u(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,c)}l((a=a.apply(e,n||[])).next())}));var e,n,t,a}),[h,r,g,b]);return(0,t.jsx)(f.W,O({reducers:k},{children:(0,t.jsxs)("div",O({className:(0,a.A)("nTzHH5s7",{},[n])},{children:[(0,t.jsx)(s.xv,{title:p("LoginFormTitle")}),P&&(0,t.jsx)(s.xv,{text:p(P),theme:s.lg.ERROR}),(0,t.jsx)(c.I,{className:j,label:p("InputUsername"),autofocus:!0,onChange:C,value:b}),(0,t.jsx)(c.I,{className:j,label:p("InputPassword"),onChange:N,value:g}),(0,t.jsx)(u.zx,O({className:"Ok_5amJo",theme:u.bn.OUTLINE,onClick:I,disabled:w},{children:p("Login")}))]}))}))}))},5150:(e,n,r)=>{r.d(n,{W:()=>u});var t=r(5893),a=r(7294),o=r(7007),u=function(e){var n=e.children,r=e.reducers,u=e.removeAfterUnmount,c=void 0===u||u,l=(0,o.I0)(),i=(0,o.oR)();return(0,a.useEffect)((function(){var e=i.reducerManager.getReducerMap();return Object.entries(r).forEach((function(n){var r=n[0],t=n[1];e[r]||(i.reducerManager.add(r,t),l({type:"@INIT ".concat(r," reducer")}))})),function(){c&&Object.entries(r).forEach((function(e){var n=e[0];i.reducerManager.remove(n),l({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,t.jsx)(t.Fragment,{children:n})}},9822:(e,n,r)=>{r.d(n,{I:()=>c});var t=r(5893),a=r(927),o=r(7294);var u=function(){return u=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},u.apply(this,arguments)},c=(0,o.memo)((function(e){var n,r=e.className,c=e.value,l=e.onChange,i=e.label,s=e.type,f=void 0===s?"text":s,d=e.autofocus,p=e.readonly,h=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]])}return r}(e,["className","value","onChange","label","type","autofocus","readonly"]),v=(0,o.useRef)(null);(0,o.useEffect)((function(){var e;d&&(null===(e=v.current)||void 0===e||e.focus())}),[d]);var y=((n={}).fTN1PnWu=p,n);return(0,t.jsxs)("div",u({className:(0,a.A)("yiPASP1v",y,[r])},{children:[i&&(0,t.jsx)("div",u({className:"v71VlLMX"},{children:i})),(0,t.jsx)("input",u({},h,{ref:v,type:f,value:c,readOnly:p,onChange:function(e){null==l||l(e.target.value)},className:"LVdIPwcx"}))]}))}))}}]);