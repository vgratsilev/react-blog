"use strict";(self.webpackChunkreact_blog=self.webpackChunkreact_blog||[]).push([[292],{9272:function(e,a,r){r.d(a,{I:function(){return o}});var s=r(7090),t=r(7294),n=r(5893);const o=(0,t.memo)((e=>{const{className:a,value:r,onChange:o,label:c,type:l="text",autofocus:u,readonly:d,...i}=e,m=(0,t.useRef)(null);(0,t.useEffect)((()=>{u&&m.current?.focus()}),[u]);const g={fTN1PnWu:d};return(0,n.jsxs)("div",{className:(0,s.A)("yiPASP1v",g,[a]),children:[c&&(0,n.jsx)("div",{className:"v71VlLMX",children:c}),(0,n.jsx)("input",{...i,ref:m,type:l,value:r,readOnly:d,onChange:e=>{o?.(e.target.value)},className:"LVdIPwcx"})]})}))},2292:function(e,a,r){r.r(a),r.d(a,{default:function(){return N}});var s=r(7090),t=r(5443),n=r(2790),o=r(9272),c=r(1992),l=r(7294),u=r(6276),d=r(4839),i=r(2647),m=r(4268),g=r(5625),f=r(5008);const h=(0,m.hg)("login/loginByUsername",(async(e,a)=>{const{dispatch:r,rejectWithValue:s,extra:t}=a;try{const a=await t.api.post("/login",e);if(!a.data)throw new Error;return localStorage.setItem(f.z_,JSON.stringify(a.data)),r(g.hI.setAuthData(a.data)),a.data}catch(e){return s("LoginErrorMessage")}})),p={isLoading:!1,username:"",password:"",error:""},v=(0,m.oM)({name:"login",initialState:p,reducers:{setUsername:(e,a)=>{e.username=a.payload},setPassword:(e,a)=>{e.password=a.payload}},extraReducers:e=>{e.addCase(h.pending,(e=>{e.error=void 0,e.isLoading=!0})).addCase(h.fulfilled,(e=>{e.isLoading=!1})).addCase(h.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{actions:x}=v,{reducer:j}=v,y=e=>e?.loginForm??p;var b="PQPa1eB5",w=r(5893);const C={loginForm:j};var N=(0,l.memo)((e=>{const{className:a,onSuccess:r}=e,{t:m}=(0,t.$)(),g=(0,i.T)(),{username:f,password:p,isLoading:v,error:j}=(0,c.v9)(y),N=(0,l.useCallback)((e=>{g(x.setUsername(e))}),[g]),I=(0,l.useCallback)((e=>{g(x.setPassword(e))}),[g]),L=(0,l.useCallback)((async()=>{"fulfilled"===(await g(h({username:f,password:p}))).meta.requestStatus&&r()}),[g,r,p,f]);return(0,w.jsx)(d.W,{reducers:C,children:(0,w.jsxs)("div",{className:(0,s.A)("nTzHH5s7",{},[a]),children:[(0,w.jsx)(u.xv,{title:m("LoginFormTitle"),TitleTag:"h1"}),j&&(0,w.jsx)(u.xv,{text:m(j),theme:u.lg.ERROR}),(0,w.jsx)(o.I,{className:b,label:m("InputUsername"),autofocus:!0,onChange:N,value:f}),(0,w.jsx)(o.I,{className:b,label:m("InputPassword"),onChange:I,value:p}),(0,w.jsx)(n.zx,{className:"Ok_5amJo",theme:n.bn.OUTLINE,onClick:L,disabled:v,children:m("Login")})]})})}))},4839:function(e,a,r){r.d(a,{W:function(){return o}});var s=r(7294),t=r(1992),n=r(5893);const o=e=>{const{children:a,reducers:r,removeAfterUnmount:o=!0}=e,c=(0,t.I0)(),l=(0,t.oR)();return(0,s.useEffect)((()=>{const e=l.reducerManager.getReducerMap();return Object.entries(r).forEach((a=>{let[r,s]=a;e[r]||(l.reducerManager.add(r,s),c({type:`@INIT ${r} reducer`}))})),()=>{o&&Object.entries(r).forEach((e=>{let[a]=e;l.reducerManager.remove(a),c({type:`@DESTROY ${a} reducer`})}))}}),[]),(0,n.jsx)(n.Fragment,{children:a})}}}]);